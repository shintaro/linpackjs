onmessage=function(c){var c=c.data.arraySize,e=new Linpack;e.setArsize(c);c=e.runLinpack();postMessage(c)};function Linpack(){}Linpack.prototype.setArsize=function(c){this.arsize=2*(c/2);10>this.arsize&&alert("Too Small")};Linpack.prototype.getArsize=function(){return this.arsize};Linpack.prototype.runLinpack=function(){var c;this.arsize/=2;this.arsize*=2;for(c=1;5>this.linpackSub(c,this.arsize)/1E3;)c*=2;return this.result};
Linpack.prototype.linpackSub=function(c,e){var f=[],i=[],b,d,h=[],a,g,j,k,n,l,m;g=b=0;this.result="";a=e/2;d=2*a*a*a/3+2*a*a;f=[e*e];i=[e];h=[e];l=m=0;k=(new Date).getTime();for(j=0;j<c;j++)b=this.matgen(f,e,a,i,b),n=(new Date).getTime(),g=this.dgefa(f,e,a,h,g,1),l+=(new Date).getTime()-n,n=(new Date).getTime(),this.dgesl(f,e,a,h,i,0,1),m+=(new Date).getTime()-n;for(j=0;j<c;j++)b=this.matgen(f,e,a,i,b),n=(new Date).getTime(),g=this.dgefa(f,e,a,h,g,0),l+=(new Date).getTime()-n,n=(new Date).getTime(),
this.dgesl(f,e,a,h,i,0,0),m+=(new Date).getTime()-n;f=(new Date).getTime()-k;if(0.5>f/1E3||0.2>(l+m)/1E3)return 0;d=2*c*d/(1E3*(l+m)/1E3);i=f-l-m;0>l/1E3&&(l=0);0>m/1E3&&(m=0);0>i/1E3&&(i=0);this.result+=c+" "+f/1E3+" "+100*l/f+" "+100*m/f+" "+100*i/f+" "+d;return f};Linpack.prototype.matgen=function(c,e,f,i,b){var d,h,a;d=1325;for(a=b=0;a<f;a++)for(h=0;h<f;h++)d=3125*d%65536,c[e*a+h]=(d-32768)/16384,b=c[e*a+h]>b?c[e*a+h]:b;for(h=0;h<f;h++)i[h]=0;for(a=0;a<f;a++)for(h=0;h<f;h++)i[h]+=c[e*a+h];return b};
Linpack.prototype.dgefa=function(c,e,f,i,b,d){var h,a,g,j;if(0!==d){if(b=0,j=f-1,0<=j)for(a=0;a<j;a++)if(h=a+1,g=this.idamax(f-a,c,e*a+a,1)+a,i[a]=g,0!==c[e*a+g]){g!==a&&(d=c[e*a+g],c[e*a+g]=c[e*a+a],c[e*a+a]=d);d=-1/c[e*a+a];for(this.dscal_r(f-(a+1),d,c,e*a+a+1,1);h<f;h++)d=c[e*h+g],g!==a&&(c[e*h+g]=c[e*h+a],c[e*h+a]=d),this.daxpy_r(f-(a+1),d,c,e*a+a+1,1,c,e*h+a+1,1)}else b=a}else if(b=0,j=f-1,0<=j)for(a=0;a<j;a++)if(h=a+1,g=this.idamax(f-a,c,e*a+a,1)+a,i[a]=g,0!==c[e*a+g]){g!==a&&(d=c[e*a+g],c[e*
a+g]=c[e*a+a],c[e*a+a]=d);d=-1/c[e*a+a];for(this.dscal_ur(f-(a+1),d,c,e*a+a+1,1);h<f;h++)d=c[e*h+g],g!==a&&(c[e*h+g]=c[e*h+a],c[e*h+a]=d),this.daxpy_ur(f-(a+1),d,c,e*a+a+1,1,c,e*h+a+1,1)}else b=a;i[f-1]=f-1;0===c[e*(f-1)+(f-1)]&&(b=f-1);return b};
Linpack.prototype.dgesl=function(c,e,f,i,b,d,h){var a,g,j;if(0!==h)if(h=f-1,0===d){if(1<=h)for(a=0;a<h;a++)j=i[a],d=b[j],j!==a&&(b[j]=b[a],b[a]=d),this.daxpy_r(f-(a+1),d,c,e*a+a+1,1,b,a+1,1);for(g=0;g<f;g++)a=f-(g+1),b[a]/=c[e*a+a],d=-b[a],this.daxpy_r(a,d,c,e*a+0,1,b,0,1)}else{for(a=0;a<f;a++)d=this.ddot_r(a,c,e*a+0,1,b,0,1),b[a]=(b[a]-d)/c[e*a+a];if(1<=h)for(g=1;g<h;g++)a=f-(g+1),b[a]+=this.ddot_r(f-(a+1),c,e*a+a+1,1,b,a+1,1),j=i[a],j!==a&&(d=b[j],b[j]=b[a],b[a]=d)}else if(h=f-1,0===d){if(1<=h)for(a=
0;a<h;a++)j=i[a],d=b[j],j!==a&&(b[j]=b[a],b[a]=d),this.daxpy_ur(f-(a+1),d,c,e*a+a+1,1,b,a+1,1);for(g=0;g<f;g++)a=f-(g+1),b[a]/=c[e*a+a],d=-b[a],this.daxpy_ur(a,d,c,e*a+0,1,b,0,1)}else{for(a=0;a<f;a++)d=this.ddot_ur(a,c,e*a+0,1,b,0,1),b[a]=(b[a]-d)/c[e*a+a];if(1<=h)for(g=1;g<h;g++)a=f-(g+1),b[a]+=this.ddot_ur(f-(a+1),c,e*a+a+1,1,b,a+1,1),j=i[a],j!==a&&(d=b[j],b[j]=b[a],b[a]=d)}};
Linpack.prototype.daxpy_r=function(c,e,f,i,b,d,h,a){var g,j,k;if(!(0>=c)&&0!==e)if(1!==b||1!==a){k=j=1;0>b&&(j=(-c+1)*b+1);0>a&&(k=(-c+1)*a+1);for(g=0;g<c;g++)d[k+h]+=e*f[j+i],j+=b,k+=a}else for(g=0;g<c;g++)d[g+h]+=e*f[g+i]};Linpack.prototype.ddot_r=function(c,e,f,i,b,d,h){var a,g,j,k;a=0;if(0>=c)return 0;if(1!==i||1!==h){k=j=0;0>i&&(j=(-c+1)*i);0>h&&(k=(-c+1)*h);for(g=0;g<c;g++)a+=e[j+f]*b[k+d],j+=i,k+=h;return a}for(g=0;g<c;g++)a+=e[g+f]*b[g+d];return a};
Linpack.prototype.dscal_r=function(c,e,f,i,b){var d;if(!(0>=c))if(1!==b){c*=b;for(d=0;d<c;d+=b)f[d+i]*=e}else for(d=0;d<c;d++)f[d+i]*=e};Linpack.prototype.daxpy_ur=function(c,e,f,i,b,d,h,a){var g,j,k;if(!(0>=c)&&0!==e)if(1!==b||1!==a){k=j=1;0>b&&(j=(-c+1)*b+1);0>a&&(k=(-c+1)*a+1);for(g=0;g<c;g++)d[k+i]=d[k+h]+e*f[j+i],j+=b,k+=a}else{b=c%4;if(0!==b){for(g=0;g<b;g++)d[g+h]+=e*f[g+i];if(4>c)return}for(g=b;g<c;g+=4)b=g+i,a=g+h,d[a]+=e*f[b],d[a+1]+=e*f[b+1],d[a+2]+=e*f[b+2],d[a+3]+=e*f[b+3]}};
Linpack.prototype.ddot_ur=function(c,e,f,i,b,d,h){var a,g,j,k;a=0;if(0>=c)return 0;if(1!==i||1!==h){k=j=0;0>i&&(j=(-c+1)*i);0>h&&(k=(-c+1)*h);for(g=0;g<c;g++)a+=e[j+f]*b[k+d],j+=i,k+=h;return a}i=c%5;if(0!==i){for(g=0;g<i;g++)a+=e[g+f]*b[g+d];if(5>c)return a}for(g=i;g<c;g+=5)i=g+f,h=g+d,a=a+e[i]*b[h]+e[i+1]*b[h+1]+e[i+2]*b[h+2]+e[i+3]*b[h+3]+e[i+4]*b[h+4];return a};
Linpack.prototype.dscal_ur=function(c,e,f,i,b){var d;if(!(0>=c))if(1!==b){c*=b;for(d=0;d<c;d+=b)f[d+i]*=e}else{b=c%5;if(0!==b){for(d=0;d<b;d++)f[d+i]*=e;if(5>c)return}for(d=b;d<c;d+=5)b=d+i,f[b]*=e,f[b+1]*=e,f[b+2]*=e,f[b+3]*=e,f[b+4]*=e}};
Linpack.prototype.idamax=function(c,e,f,i){var b,d,h,a;h=0;if(1>c)return-1;if(1===c)return 0;if(1!==i){d=1;b=Math.abs(e[0+f]);d+=i;for(a=1;a<c;a++)Math.abs(e[d+f])>b&&(h=a,b=Math.abs(e[d+f])),d+=i}else{h=0;b=Math.abs(e[0+f]);for(a=1;a<c;a++)Math.abs(e[a+f])>b&&(h=a,b=Math.abs(e[a+f]))}return h};
